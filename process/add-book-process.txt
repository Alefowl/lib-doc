Алгоритм добавления книги.

0. Предварительными условиями добавления книги являются развернутое локально окружение
и зарегистрированный пользователь, от лица которого происходит добавление книги в приватной части системы.

1. Создать нового автора или выбрать его из списка уже существующих в системе.
2. Создать новую метакнигу или выбрать ее из списка уже существующих в системе.
   В книге должен быть автора из предыдущего пункта
3. Создать новую книгу на основе метакниги из предыдущего пункта.
4. Добавить текст книги в созданную в пункте 3 книгу.
4.1. Текст размечается с помощью символов {, |, [].
  { - это начало главы, | - это конец заголовка главы, [3] - это сноска номер 3.
  Пример:
  { Глава 1| Текст главы 1
  { Глава 2| Текст главы 2
  { Глава 3|
  { Параграф 3.1| Текст параграфа 3.1 внутри главы 3
  { Параграф 3.2| Текст параграфа 3.2 внутри главы 3
  {
4.2. Размеченный текст завершается символом {.
4.3. Размеченный текст добавляется в соответствущее поле формы на сайте, происходит подсчет глав в тексте.
     Число глав в текстах книг, ассоциированных с одной метакнигой, должно совпадать.
5. Если в системе находится 2 книги с одинаковым числом глав, их можно посмотреть по ссылке:
     /lbid/215/rbid/214/chid/10 ,
     где lbid - идентификатор левой книги, rbid - идентификатор правой книги, chid - номер главы.

6. Если по какой-то причине совершена ошибка с разметкой, добавлением книг/метакниг/авторов, добавлением текста,
   книгу надо создать заново и добавить текст, без редактирования предыдущего.